<div class="checking-input-component">
  <div class="input-wrapper">
    <hab-icon
      [symbol]="symbolForState(control)"
      [class.spinning]="control.pending"
      [class.invalid]="control.dirty && !control.pending && !control.valid"
      [class.valid]="!control.pending && control.valid">
    </hab-icon>
    <input type="text"
      [class.loading]="control.pending"
      [formControl]="form.controls[name]"
      id="{{id}}"
      autocomplete="off"
      autofocus="{{autofocus}}"
      placeholder="{{placeholder}}">
  </div>
  <div class="validation-message" *ngIf="control.dirty && !control.pending ">
    <span *ngIf="!control.valid" class="invalid">
      <span *ngIf="control.errors.invalidFormat">
        {{displayName}} {{unmatchedMessage}}
      </span>
      <span *ngIf="control.errors.required">
        {{displayName}} is required
      </span>
      <span *ngIf="control.errors.taken">
        {{displayName}} {{notAvailableMessage}}
      </span>
      <span *ngIf="control.errors.maxlength">
        Cannot be longer than {{maxLength}} characters
      </span>
      <ng-container *ngFor="let validator of validators">
        <span *ngIf="control.errors[validator.error]">
          {{validator.message()}}
        </span>
      </ng-container>
      
    </span>
    <span *ngIf="control.valid" class="valid">
      {{displayName}} {{availableMessage}}
    </span>
  </div>
</div>
