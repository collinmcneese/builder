<div class="body">
  <div class="content">
    <section *ngIf="builderEnabled && memberOfOrigin">
      <hab-project-settings
        [origin]="origin"
        [integrations]="integrations"
        (toggled)="toggled($event)"
        (saved)="saved($event)">
      </hab-project-settings>
    </section>

    <section *ngIf="!selectingPlan">

      <!-- new table -->
      <button (click)="getTest()">test</button>

      <table>
        <thead>
          <tr>
            <th>Package Name</th>
            <th>Platforms</th>
          </tr>
        </thead>
        <tbody>

          <!-- <tr *ngFor="let proj of projects">
            <td class="package-name">
              <a [routerLink]="['/pkgs', origin, proj, 'latest']">
                <span class="column name">{{ proj }}</span>
              </a>
            </td>

            <td class="platform">
              <a [routerLink]="['/pkgs', origin, proj, 'latest']"> -->
                <!-- this will be used for package icons -->
                <!-- <hab-platform-icon *ngFor="let platform of proj.platforms" [platform]="platform"></hab-platform-icon>
                <hab-icon symbol="chevron-right" class="chevron-right"></hab-icon>
              </a>
            </td>
          </tr> -->


          <tr *ngFor="let pkg of packages">
            <td class="package-name">
              <a [routerLink]="['/pkgs', pkg.origin, pkg.name, 'latest']">
                <span class="column name">{{ pkg.name }}</span>
              </a>
            </td>
          
            <td class="platform">
              <a [routerLink]="['/pkgs', pkg.origin, pkg.name, 'latest']">
                <!-- this will be used for package icons -->
                <hab-platform-icon *ngFor="let platform of pkg.platforms" [platform]="platform"></hab-platform-icon>
                <hab-icon symbol="chevron-right" class="chevron-right"></hab-icon>
              </a>
            </td>
          </tr>

        </tbody>
      </table>

      <!-- end new table  -->


      <!-- <ul class="nav-list" *ngIf="projectsExist">
        <li class="heading">
          <h4 class="testing">Connected Plans</h4>
        </li>
        <li class="item" *ngFor="let proj of projects">
          <a [routerLink]="['/pkgs', origin, proj, 'latest']">
            <span class="column name">{{ proj }}</span>
          </a>
          <hab-icon symbol="chevron-right"></hab-icon>
        </li>
      </ul>
      <ul class="nav-list">
        <li class="heading">
          <h4>Packages</h4>
        </li>
        <li class="none" *ngIf="noPackages">
          <span>No packages found.</span>
        </li>
        <li class="item" *ngFor="let pkg of packages">
          <a [routerLink]="['/pkgs', pkg.origin, pkg.name, 'latest']">
            <span class="column name">{{ pkg.name }}</span>
          </a>
          <hab-icon symbol="chevron-right"></hab-icon>
        </li>
      </ul> -->

      
      <div *ngIf="packages.size < totalCount">
        Showing {{packages.size}} of {{totalCount}} packages.
        <a (click)="fetchMorePackages()">
          Load {{(totalCount - packages.size) > perPage ? perPage : totalCount - packages.size }} more.
        </a>
      </div>
    </section>
  </div>

  <aside>
    <h3>Default Package Visibility</h3>
    <p>
      <hab-visibility-icon [visibility]="defaultVisibility" prefix="Default Package Visibility:"></hab-visibility-icon>
      {{ defaultVisibility | titlecase }} Packages
    </p>
    <h3>Manual Upload</h3>
    <p>
      You can upload pre-built packages to the Origin following the instruction in the
      <!-- href="{{ config['docs_url'] }}/using-builder/#upload-and-promote-packages"  -->
      <a 
      href="https://www.habitat.sh/docs/using-builder/#upload-and-promote-packages" target="_blank">
      Docs
      <hab-icon symbol="open-in-new"></hab-icon>
      </a>.
    </p>
  </aside>

</div>